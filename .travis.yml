sudo: false
# sudo: required
# dist: trusty

language: python

addons:
  apt:
    packages:
      - oracle-java8-installer
  # hosts:
  #   - localhost


# test the server on multiple JDKs
jdk:
  - oraclejdk8
  #- oraclejdk7

python:
  - "2.7"
  # - "3.2"
  # - "3.3"
  # - "3.4"
  - "3.5"

before_install:
  # set to Java 8
  - wget https://github.com/michaelklishin/jdk_switcher/blob/master/jdk_switcher.sh
  - ./jdk_switcher.sh use oraclejdk8
  - ./jdk_switcher.sh home oraclejdk8
  # update setuptools
  - pip install -U pip setuptools
  - pip install coveralls
  # show java version
  - java -version
  # start server as an experiment
  - wget http://www.cs.arizona.edu/~hahnpowell/processors-server/current/processors-server.jar
  - export PROCESSORS_SERVER="$(pwd)/processors-server.jar"
  - java -Xmx3G -jar processors-server.jar NLPServer 8886

# command to install dependencies
install:
  - pip install .
#  - pip install git+https://github.com/myedibleenso/py-processors.git
# cache:
#   pip: true
#   timeout: 1000

# command to run tests
script:
  #- green -vv --run-coverage processors/tests/testserialization.py
  - green -vv --run-coverage

after_success:
  # inspect log file
  - cat ~/.py-processors.log
  - coveralls
